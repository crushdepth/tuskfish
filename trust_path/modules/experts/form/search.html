<?php declare(strict_types=1); ?>

<!-- Advanced search form -->
<form class="form-horizontal" action="experts.php" method="post" role="form" accept-charset="UTF-8">
    
    <!-- Search terms -->
    <div class="col-md-6 offset-md-3 form-group input-group">
      <input type="text" class="form-control is-valid" name="searchTerms" id="searchTerms" 
          <?php if (isset($terms) && !empty($terms)): ?>
            value="<?php echo htmlspecialchars($terms, ENT_QUOTES, "UTF-8", false); ?>"
          <?php else: ?>
            placeholder="<?php echo TFISH_SEARCH_ENTER_TERMS; ?>" 
          <?php endif; ?>				   
      required>
    </div>
    
    <!-- Search type -->
    <div class="col-md-6 offset-md-3 form-group input-group">
      <select class="form-control custom-select is-valid" name="searchType" id="searchType">
        <option <?php if (isset($type) && $type === "AND") echo "selected"; ?> value="AND"><?php echo TFISH_SEARCH_ALL; ?></option>
        <option <?php if (isset($type) && $type === "OR") echo "selected"; ?> value="OR"><?php echo TFISH_SEARCH_ANY; ?></option>
        <option <?php if (isset($type) && $type === "exact") echo "selected"; ?> value="exact"><?php echo TFISH_SEARCH_EXACT; ?></option>	
        </select>
    </div>
    
    <!-- Submit -->
    <div class="form-group col-md-6 offset-md-3 clearfix">
        <input type="hidden" name="op" value="search" />
        <button type="submit" class="btn btn-primary float-left"><?php echo TFISH_SEARCH ?></button>
    </div>
    
</form>

<div class="text-center">
    <p><a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=a'; ?>">[A]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=b'; ?>">[B]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=c'; ?>">[C]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=d'; ?>">[D]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=e'; ?>">[E]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=f'; ?>">[F]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=g'; ?>">[G]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=h'; ?>">[H]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=i'; ?>">[I]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=j'; ?>">[J]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=k'; ?>">[K]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=l'; ?>">[L]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=m'; ?>">[M]</a></p>
    <p><a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=n'; ?>">[N]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=o'; ?>">[O]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=p'; ?>">[P]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=q'; ?>">[Q]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=r'; ?>">[R]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=s'; ?>">[S]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=t'; ?>">[T]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=u'; ?>">[U]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=v'; ?>">[V]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=w'; ?>">[W]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=x'; ?>">[X]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=y'; ?>">[Y]</a>
      <a href="<?php echo TFISH_URL . 'experts?op=alpha&amp;letter=z'; ?>">[Z]</a></p>
</div>

<?php if (isset($searchResults)): ?>
<!-- Search results -->
<hr>
<div class="text-left">
    <?php if (!empty($searchResults)): ?>
    <h2><?php echo $tfValidator->escapeForXss($resultsCount) . ' ' . TFISH_SEARCH_RESULTS . ':'; ?></h2><hr>
    <?php foreach ($searchResults as $key => $object): ?>
    <div class="clearfix">
        <h3><a href="<?php echo $object->getUrl($targetFileName); ?>"><?php echo $object->getIcon(); ?> <?php echo $object->getName(); ?></a></h3>
        <?php if ($object->image): ?>
        <div class="float-left">
            <figure class="figure-left">
                <a href="<?php echo $object->getUrl($targetFileName); ?>">
                    <img class="img-responsive" src="<?php echo $object->getCachedImage(100); ?>" 
                         title="<?php echo $object->getName(); ?>" 
                         alt="<?php echo $object->getName(); ?>" />
                </a>
            </figure>
        </div>
        <?php endif; ?>
        <?php echo $object->getExperience(); ?>
    </div>
    <?php endforeach; ?>
    <?php else: ?>
    <h2><?php echo TFISH_SEARCH_NO_RESULTS; ?></h2><hr>
    <?php endif; ?>
</div>
<?php endif; ?>