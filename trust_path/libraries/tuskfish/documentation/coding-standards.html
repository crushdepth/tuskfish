<h1>Coding standards</h1>
<ul>
	<li>$tfish_ prefixed variables are reserved for core system use. Please do not use this namespace for other purposes.</li>
	<li>Wrap code lines after 150 characters. We now live in a world with wide-screen monitors.</li>
    <li>Thou shalt only use alphabetical characters for class names.</li>
</ul>

<h2>Names and character restrictions</h2>
<p>As a second-line security measure, character restrictions apply to some things. This is
    basically so that in the event that a mistake has been made in escaping data the system is
    still difficult to abuse. The general idea is that, for certain kinds of attack, there's not
    much you can do if you are restricted to alphanumeric characters.</p>
<p>While you can actually create legitimate database columns in SQLite that include identifier
    delimiters as part of their names and you can use them safely (for example), this sort of thing
    is not consistent with a risk reduction approach. Current restrictions are:</p>
<ul>
    <li>Database names: Alphanumeric and underscore characters, only.</li>
    <li>Database table names: Alphanumeric characters only.</li>
    <li>Database column names: Alphanumeric and underscore characters only.</li>
    <li>Class names: Alphabetical characters only, which must also be whitelisted in
        TfishContentHandler::getTypes().</li>
</ul>

<h3>Output escaping (XSS mitigation)</h3>
<ul>
    <li>Project policy is to apply escaping to data at the point of use. Generally speaking, output
    escaping should be conducted in the html template files.</li>
    <li>In the case of nested templates, child templates should escape their own data before
    they are inserted into a parent (a parent template cannot escape a child that contains HTML
    markup without destroying it).</li>
    <li>In some cases, mainly select boxes, pagination and other controls generated by functions
    rather than templates, the escaping should be handled by the function before the control is
    inserted into a parent template, for the same reason as above.</li>
    <li>Content objects can escape their own properties by calling $object->escape('property'). Non-
    object data can be escaped by calling TfishFilter::escape($data). Both apply htmlspecialchars()
    but the object version skips the teaser and description fields, as these contain HTML mark up
    and are input filtered with the HTMLPurifier library.</li>
</ul>