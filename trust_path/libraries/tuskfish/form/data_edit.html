<form class="form-horizontal" action="admin.php" method="post" enctype="multipart/form-data" role="form">
    <input type="hidden" name="id" value="<?php echo $content->id; ?>">
	<div class="form-group">
		
		<!-- Type -->
		<label for="type" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_TYPE; ?>:</label>
		<div class="col-lg-2 col-md-4 col-sm-9 col-xs-9">
			<select class="form-control" name="type" id="type" required>
				<?php
					foreach ($content_types as $key => $type) {
						if ($content->type == $key) {
							echo '<option value="' . $key . '" selected>' . $type . '</option>';
						} else {
							echo '<option value="' . $key . '">' . $type . '</option>';
						}
					}
				?>
            </select>
		</div>
		
		<!-- Date (boostrap-datepicker) -->
        <div id="dateContainer">
		<label for="date" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_DATE; ?>:</label>
		<div class="col-lg-2 col-md-4 col-sm-9 col-xs-9"><input type="text" class="form-control" name="date" id="date" <?php if (isset($content->date)) { echo 'value="' . $content->date . '"'; } ?>></div>
        </div>
		<script>
			$('#date').datepicker({
				format: 'yyyy-mm-dd',
				todayHighlight: 'true',
				todayBtn: 'linked',
				startView: 'years'
			});
			$('#date').datepicker('setDate', new Date('<?php echo $content->date; ?>'));
			$('#date').datepicker('update');
		</script>
        
		<!-- Rights -->
		<div id="rightsContainer">
        <label for="rights" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_RIGHTS; ?>:</label>
		<div class="col-lg-2 col-md-4 col-sm-9 col-xs-9">
			<select class="form-control" name="rights" id="rights" required>
				<?php
					foreach ($rights as $key => $right) {
						if ($content->rights == $key) {
							echo '<option value="' . $key . '" selected>' . $right . '</option>';
						} else {
							echo '<option value="' . $key . '">' . $right . '</option>';
						}
					}
				?>
			</select>
		</div>
        </div>
		
		<!-- Tags -->
        <div id="tagsContainer">
		<label for="tags" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_TAGS; ?>:</label>
		<div class="col-lg-2 col-md-4 col-sm-9 col-xs-9">
			<select multiple size="5" class="form-control" name="tags[]" id="tags">
				<?php
					foreach ($tags as $tag_id => $tag_title) {
						if (in_array($tag_id, $content->tags)) {
							echo '<option value="' . $tag_id . '" selected>' . $tag_title . '</option>';
						} else {
							echo '<option value="' . $tag_id . '">' . $tag_title . '</option>';
						}
					}
				?>
            </select>
		</div>
        </div>
		
	</div>
	
	<!-- Title -->
	<div class="form-group">
		<label for="title" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_TITLE; ?>:</label>
		<div class="control-label col-lg-11 col-md-10 col-sm-9 col-xs-9">
			<input type="text" class="form-control" name="title" id="title" <?php if (isset($content->title)) echo 'value="' . $content->escape('title') . '"'; ?> required>
		</div>
	</div>
	
	<!-- Teaser -->
	<div class="form-group">
		<label for="teaser" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_TEASER; ?>:</label>
		<div class="control-label col-lg-11 col-md-10 col-sm-9 col-xs-9">
            <!-- <!-- TinyMCE editor field -->
            <textarea name="teaser" id="teaser" class="form-control text-left" required><?php if (isset($content->teaser)) { echo $content->teaser; } ?></textarea>
        </div>
	</div>
	
	<!-- Description -->
	<div class="form-group">
		<label for="description" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_DESCRIPTION; ?>:</label>
		<div class="control-label col-lg-11 col-md-10 col-sm-9 col-xs-9">
            <!-- TinyMCE editor field -->
            <textarea name="description" id="description" class="form-control text-left" required><?php if (isset($content->description)) { echo $content->description; } ?></textarea>
		</div>
	</div>
	
	<div class="form-group">
		
		<!-- Creator -->
        <div id="creatorContainer">
		<label for="creator" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_CREATOR; ?>:</label>
		<div class="col-lg-5 col-md-4 col-sm-9 col-xs-9"><input type="text" class="form-control" name="creator" id="creator" <?php if (isset($content->creator)) echo 'value="' . $content->escape('creator') . '"'; ?>></div>
        </div>
        
		<!-- Publisher -->
        <div id="publisherContainer">
        <label for="publisher" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_PUBLISHER; ?>:</label>
		<div class="col-lg-5 col-md-4 col-sm-9 col-xs-9"><input type="text" class="form-control" name="publisher" id="publisher" <?php if (isset($content->publisher)) echo 'value="' . $content->escape('publisher') . '"'; ?>></div>
        </div>
		
	</div>
    
    <!-- Parent -->
    <div class="form-group">
        
        <div id="parentContainer">
		<label for="parent" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_PARENT; ?>:</label>
		<div class="col-lg-11 col-md-10 col-sm-9 col-xs-9">
        <select class="form-control" name="parent" id="parent" required>
        <?php foreach ($parent_select_options as $key => $option): ?>
        <?php if ($key == $content->id): ?>
            <option value="<?php echo $key; ?>" disabled><?php echo $option; ?></option>
        <?php elseif ($key == $content->parent): ?>
            <option value="<?php echo $key; ?>" selected><?php echo $option; ?></option>
        <?php else: ?>
            <option value="<?php echo $key; ?>"><?php echo $option; ?></option>
        <?php endif; ?> 
        <?php endforeach; ?>
        </select>
        </div>
        </div>
    </div>
    
	<div id="imageContainer">
	<div class="form-group">
		
		<!-- Image -->
        
		<label for="image" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_IMAGE; ?>:</label>
		<?php if (isset($content->image) && !empty($content->image)): ?>
			<div class="control-label col-lg-9 col-md-8 col-sm-6 col-xs-6">
				<input id="image" name="image" type="file" data-preview-file-type="image" >
			</div>
			<div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
				<div class="checkbox"><label><input id="deleteImage" name="deleteImage" type="checkbox" value="1"><b><?php echo TFISH_DELETE_IMAGE; ?></b></label></div>
			</div>
		<?php else: ?>
			<div class="control-label col-lg-11 col-md-10 col-sm-9 col-xs-9">
				<input id="image" name="image" type="file" data-preview-file-type="image" >
			</div>
		<?php endif; ?>
		
		<script>$("#image").fileinput({
			'showUpload':false,
			'previewFileType':'image',
			'initialCaption':'<?php if (isset($content->image)) echo $content->image; ?>',
			});
		</script>

	</div>
	
	<div class="form-group">
        
        <!-- Caption -->
		<label for="caption" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_CAPTION; ?>:</label>
		<div class="control-label col-lg-11 col-md-10 col-sm-9 col-xs-9">
			<input type="text" class="form-control" name="caption" id="caption" <?php if (isset($content->caption)) echo 'value="' . $content->escape('caption') . '"'; ?>>
		</div>
            
    </div>
    </div>
    
    <div id="mediaContainer">
	<div class="form-group">

		<!-- Media -->
        
		<label for="media" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_MEDIA; ?>:</label>
		<?php if (isset($content->media) && !empty($content->media)): ?>
			<div class="control-label col-lg-9 col-md-8 col-sm-6 col-xs-6">
				<input id="media" name="media" type="file" data-preview-file-type="text" >
			</div>
			<div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
				<div class="checkbox"><label><input id="deleteMedia" name="deleteMedia" type="checkbox" value="1"><b><?php echo TFISH_DELETE_MEDIA; ?></b></label></div>
			</div>
		<?php else: ?>
			<div class="control-label col-lg-11 col-md-10 col-sm-9 col-xs-9">
				<input id="media" name="media" type="file">
			</div>
		<?php endif; ?>
		
		<script>$("#media").fileinput({
			'showUpload':false,
			'previewFileType':'any',
			'initialCaption':'<?php if (isset($content->media)) echo $content->media; ?>'});
		</script>
		
	</div>
	</div>
    
	<div class="form-group">
		
        <!-- Language -->
        <div id="languageContainer">
		<label for="language" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_LANGUAGE; ?>:</label>
		<div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
			<select class="form-control" name="language" id="language" required>
				<?php
					foreach ($languages as $key => $value) {
						if (isset($content->language) && $content->language == $key) {
							echo '<option value="' . $key . '" selected>' . $value . '</option>';
						} else {
							echo '<option value="' . $key . '">' . $value . '</option>';
						}
					}
				?>
			</select>
		</div>
        </div>
        
		<!-- Online -->
		<label for="online" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_ONLINE_STATUS; ?>:</label>
		<div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
			<label for="online" class="radio-inline">
				<input type="radio" name="online" value="1" checked id="online" <?php if ($content->online == 1) { echo 'checked="checked"'; } ?>><?php echo TFISH_ONLINE; ?>
			</label>
			<label for="online" class="radio-inline">
				<input type="radio" name="online" value="0" id="online" <?php if ($content->online == 0) { echo 'checked="checked"'; } ?>><?php echo TFISH_OFFLINE; ?>
			</label>
		</div>
	</div>
    
    <!-- Automatically calculated (hidden) values: Counter, format, file size -->
    <?php if ($content->counter): ?>
        <input type="hidden" id="counter" name="counter" value="<?php echo $content->counter; ?>" />
    <?php endif; ?>
    <?php if ($content->format): ?>
        <input type="hidden" id="format" name="format" value="<?php echo $content->format; ?>" />
    <?php endif; ?>
    <?php if ($content->file_size): ?>
        <input type="hidden" id="file_size" name="file_size" value="<?php echo $content->file_size; ?>" />
    <?php endif; ?>
	
	<div class="col-xs-12"><hr></div>
	<div class="col-xs-12"><h2><?php echo TFISH_META_TAGS; ?><h2></div>
	<div class="form-group">
		
		<!-- Meta title -->
		<label for="meta_title" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_META_TITLE; ?>:</label>
		<div class="col-lg-5 col-md-4 col-sm-9 col-xs-9"><input type="text" class="form-control" name="meta_title" id="meta_title" <?php if (isset($content->meta_title)) { echo 'value="' . $content->escape('meta_title') . '"'; } ?>></div>
		
		<!-- Meta SEO -->
		<label for="seo" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_SEO; ?>:</label>
		<div class="col-lg-5 col-md-4 col-sm-9 col-xs-9"><input type="text" class="form-control" name="seo" id="seo" <?php if (isset($content->seo)) { echo 'value="' . $content->escape('seo') . '"'; } ?>></div>
	
	</div>
	
	<!-- Meta description -->
	<div class="form-group">	
		<label for="meta_description" class="control-label col-lg-1 col-md-2 col-sm-3 col-xs-3"><?php echo TFISH_META_DESCRIPTION; ?>:</label>
		<div class="control-label col-lg-11 col-md-10 col-sm-9 col-xs-9"><input type="text" class="form-control" name="meta_description" id="meta_description" <?php if (isset($content->meta_description)) { echo 'value="' . $content->escape('meta_description') . '"'; } ?>></div>
	</div>
	
	<!-- Action buttons -->
	<button class="btn btn-primary" onclick="this.form.elements.op.value='<?php echo $op; ?>'; submit()"><?php echo $action; ?></button>
	<button class="btn btn-primary" onclick="this.form.elements.op.value=''; submit()" formnovalidate><?php echo TFISH_CANCEL; ?></button>
	
	<!-- Note that the default $op value MUST be passed in by the controller. It can be modified onChange of the type select box -->
	<input type="hidden" name="op" id="op" value="<?php echo $op; ?>" />
	
    <!-- Show or hide fields that are / not used by specific content subclasses -->
	<script>
		var allowedProperties = ['creatorContainer','dateContainer',
            'file_sizeContainer','formatContainer','imageContainer','languageContainer',
            'mediaContainer','parentContainer','publisherContainer','rightsContainer','tagsContainer'];
        $(document).ready(function(){
            $("#type").bind('change',function(){
                $.each(allowedProperties, function(i, value) {
                    $('#' + value).show();
                });
                if ($("#type").val() == 'TfishTag') {
                    var disabledProperties = ['formatContainer','file_sizeContainer',
                        'creatorContainer','mediaContainer','dateContainer','parentContainer',
                        'languageContainer','rightsContainer','publisherContainer','tagsContainer'];
                        $.each(disabledProperties, function(i, value) {
                        $('#' + value).hide();
                    });
                }
            });
            $('#type').trigger('change');
        });
	</script>
	
</form>